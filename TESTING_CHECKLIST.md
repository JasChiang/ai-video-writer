# 🧪 測試檢查清單

## 本地測試

### ✅ OAuth Token 傳遞
- [ ] 登入後 Console 顯示 `Access Token: ✅ 已取得`
- [ ] 後端日誌顯示 `OAuth Token: ✅ 已提供`
- [ ] accessToken 不為空

### ✅ 速率限制（帳號層級）
- [ ] 第 1-10 次請求成功
- [ ] 第 11 次請求返回 HTTP 429
- [ ] 錯誤訊息包含 `limitType: 'account'`
- [ ] 顯示正確的等待時間

### ✅ 速率限制（IP 層級）
- [ ] 使用多個帳號（或同一帳號）總共請求 20 次
- [ ] 第 21 次請求返回 HTTP 429
- [ ] 錯誤訊息包含 `limitType: 'ip'`
- [ ] 顯示正確的等待時間

### ✅ 帳號切換
- [ ] 登入帳號 A → 獲得 token A
- [ ] 登出 → localStorage 清除
- [ ] 登入帳號 B → 獲得 token B（不同於 A）
- [ ] 兩個帳號各有獨立的 10 次額度

### ✅ 下載未公開影片
- [ ] 上傳一個未公開影片到 YouTube
- [ ] 在應用中選擇該影片
- [ ] 點擊「生成 metadata」
- [ ] 後端使用 OAuth 認證下載
- [ ] 沒有出現 "bot" 錯誤
- [ ] 影片成功下載到 temp_videos/

### ✅ 下載公開影片
- [ ] 選擇公開影片
- [ ] 使用 Gemini YouTube URL（不下載）
- [ ] 成功生成 metadata
- [ ] 不消耗下載額度

## Render 部署測試

### ✅ 環境變數設定
- [ ] GEMINI_API_KEY 已設定
- [ ] YOUTUBE_CLIENT_ID 已設定
- [ ] VITE_SERVER_BASE_URL 已設定
- [ ] VITE_API_URL 已設定
- [ ] FRONTEND_URL 已設定

### ✅ 基本功能
- [ ] 應用可以正常開啟
- [ ] 可以登入 YouTube
- [ ] 可以看到影片列表

### ✅ OAuth Token（Render）
- [ ] 登入後檢查 Render 日誌
- [ ] 確認顯示 `OAuth Token: ✅ 已提供`
- [ ] 選擇未公開影片
- [ ] 成功生成 metadata
- [ ] 沒有 "bot" 錯誤

### ✅ 速率限制（Render）
- [ ] 使用測試工具指向 Render URL
- [ ] 執行批量測試
- [ ] 速率限制正常觸發
- [ ] 日誌顯示正確的剩餘次數

### ✅ 效能測試
- [ ] 下載速度正常（不會太慢）
- [ ] 沒有超時錯誤
- [ ] 記憶體使用正常

## 邊界測試

### ✅ 異常情況
- [ ] 未登入時嘗試下載未公開影片 → 應該失敗
- [ ] 無效的 videoId → 返回 400 錯誤
- [ ] 網路中斷 → 正確處理錯誤
- [ ] token 過期 → 提示重新登入

### ✅ 檔案緩存
- [ ] 第一次下載影片 → 上傳到 Gemini
- [ ] 第二次使用同一影片 → 直接使用緩存
- [ ] 日誌顯示 "Reused existing file"
- [ ] 不重複下載

## 測試結果

**測試日期**: _______________
**測試人員**: _______________

**通過項目**: ____ / ____
**失敗項目**: ____ / ____

### 問題記錄：
1.
2.
3.

### 備註：
